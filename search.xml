<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Androidå¤šæ¸ é“æ‰“åŒ…åŠ å›ºæ–¹æ¡ˆ</title>
    <url>/2020/09/01/Android%E5%A4%9A%E6%B8%A0%E9%81%93%E6%89%93%E5%8C%85%E5%8A%A0%E5%9B%BA%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[<p>è¿›è¿‡ç­›é€‰å¯¹æ¯”ï¼Œå†³å®šé‡‡ç”¨ç¾å›¢çš„walleå¤šæ¸ é“æ‰“åŒ…æ–¹æ¡ˆï¼Œå¥½å¤„å¦‚ä¸‹ï¼Œç¾å›¢æ–¹æ¡ˆå¯¹ä»£ç çš„ä¾µå…¥æ¯”è¾ƒå°ï¼Œå¯ä»¥ä½¿ç”¨v2ç­¾åï¼ŒèŠ‚çœå¤§é‡é‡å¤æ‰“åŒ…çš„æ—¶é—´ï¼ŒåŠ å›ºé‡‡ç”¨360åŠ å›ºçš„è§£å†³æ–¹æ¡ˆã€‚<br>ä½†æ˜¯åŠ å›ºåæŸå¤±äº†æ¸ é“ä¿¡æ¯å¹¶ä¸”360è¿›è¡Œçš„é‡ç­¾ä¸ºv1ç‰ˆæœ¬ï¼Œå› æ­¤éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è°ƒæ•´é¡¹ç›®æµç¨‹ä¸º<br><em>åŠ å›ºâ€“&gt;é‡æ–°ç­¾åâ€“&gt;å¤šæ¸ é“æ‰“åŒ…</em></p>
<a id="more"></a>


<h3 id="walleçš„é›†æˆ"><a href="#walleçš„é›†æˆ" class="headerlink" title="walleçš„é›†æˆ"></a>walleçš„é›†æˆ</h3><p>ä»¥ä¸‹ä¸ºé›†æˆæ¦‚è¦ï¼Œè¯¦æƒ…è¯·å‚è€ƒé¡¹ç›®ä¸»é¡µ<a href="https://github.com/Meituan-Dianping/walle">Meituan-Dianping/walle</a></p>
<h4 id="é…ç½®build-gradle"><a href="#é…ç½®build-gradle" class="headerlink" title="é…ç½®build.gradle"></a>é…ç½®build.gradle</h4><p>åœ¨é¡¹ç›®æ ¹è·¯å¾„ä¸‹é…ç½®walle gradleæ’ä»¶ä¾èµ–</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        classpath <span class="string">&#x27;com.meituan.android.walle:plugin:1.1.6&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨å½“å‰APPçš„build.gradleä¸­åº”ç”¨è¿™ä¸ªæ’ä»¶ï¼Œå¹¶æ·»åŠ ä¸Šç”¨äºå¤„ç†æ¸ é“ä¿¡æ¯å¯¹åº”çš„å¼•ç”¨åº“æ–‡ä»¶ã€‚</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">apply <span class="attr">plugin:</span> <span class="string">&#x27;walle&#x27;</span></span><br><span class="line">... ...</span><br><span class="line">android&#123;</span><br><span class="line">  ... ...</span><br><span class="line">&#125;</span><br><span class="line">dependencies &#123;</span><br><span class="line">    implementation <span class="string">&#x27;com.meituan.android.walle:library:1.1.6&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨éœ€è¦æ¸ é“ç­‰ä¿¡æ¯æ—¶å¯ä»¥é€šè¿‡ä¸‹é¢ä»£ç è¿›è¡Œè·å–</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String channel = WalleChannelReader.getChannel(<span class="keyword">this</span>.getApplicationContext());</span><br></pre></td></tr></table></figure>

<h4 id="åŠ å›º"><a href="#åŠ å›º" class="headerlink" title="åŠ å›º"></a>åŠ å›º</h4><p>æµè§ˆäº†360åŠ å›ºå®˜ç½‘ï¼Œæ•´ä¸ªåŠ å›ºè¿‡ç¨‹å…¶å®å¾ˆç®€å•ï¼Œä¸»è¦æœ‰ä»¥ä¸‹çš„ä¸‰ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li>è¾“å…¥360åŠ å›ºå¹³å°çš„å¸å·ã€å¯†ç </li>
<li>å°†ç­¾åæ–‡ä»¶ä¸Šä¼ åˆ°åŠ å›ºå¹³å°</li>
<li>ä¸Šä¼ éœ€è¦åŠ å›ºçš„apkæ–‡ä»¶è¿›è¡ŒåŠ å›º</li>
</ul>
<p>é€šè¿‡gradleè„šæœ¬å®ç°åŠ å›ºæ–¹æ¡ˆ</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> reinforceApk(File apk, outputPath) &#123;</span><br><span class="line">    println <span class="string">&quot;--- 360 reinforceApk start! ---&quot;</span></span><br><span class="line">    println <span class="string">&quot;reinforce apk:&quot;</span> + apk</span><br><span class="line">    <span class="keyword">if</span> (apk == <span class="literal">null</span> || !apk.exists()) &#123;</span><br><span class="line">        println <span class="string">&quot;---360 reinforceApk throw exception and forced stop!---&quot;</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> FileNotFoundException(<span class="string">&#x27;apk is not exists and cannot reinforce&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">def</span> file = <span class="keyword">new</span> File(outputPath)</span><br><span class="line">    <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">        file.mkdir()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    println <span class="string">&quot;åŠ å›ºè´¦å·ï¼š$&#123;REINFORCE_NAME&#125;&quot;</span></span><br><span class="line">    println <span class="string">&quot;åŠ å›ºå¯†ç   $&#123;REINFORCE_PASSWORD&#125;&quot;</span></span><br><span class="line">    println <span class="string">&quot;360åŠ å›ºè´¦å·ç™»å½•&quot;</span></span><br><span class="line">    exec &#123;</span><br><span class="line">        commandLine getCommand(), <span class="string">&quot;-c&quot;</span>, <span class="string">&quot;java -jar $&#123;REINFORCE_JAR&#125; -login  $&#123;REINFORCE_NAME&#125; $&#123;REINFORCE_PASSWORD&#125;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    println <span class="string">&quot;360åŠ å›ºä¸­&quot;</span></span><br><span class="line">    exec&#123;</span><br><span class="line">        commandLine getCommand(), <span class="string">&quot;-c&quot;</span>, <span class="string">&quot;java -jar $&#123;REINFORCE_JAR&#125; -jiagu $&#123;apk&#125; $&#123;outputPath&#125;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    println <span class="string">&quot;--- 360 reinforce end! ---&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="é‡ç­¾å"><a href="#é‡ç­¾å" class="headerlink" title="é‡ç­¾å"></a>é‡ç­¾å</h4><p>â€‹ åŠ å›ºå®Œæˆå,å¯¹åŠ å›ºapkè¿›è¡Œé‡ç­¾å;</p>
<p>â€‹ ä½¿ç”¨AndroidSDKä¸­çš„build-toolsç›®å½•ä¸‹, ä½¿ç”¨å‹ç¼©å¯¹é½å·¥å…·å’Œç­¾åå·¥å…·å®Œæˆé‡ç­¾å, æ­¥éª¤å¦‚ä¸‹:</p>
<p>å¯¹é½ï¼Œå¯¹Apkæ–‡ä»¶è¿›è¡Œå­˜æ¡£å¯¹é½ä¼˜åŒ–ï¼Œç¡®ä¿æ‰€æœ‰çš„æœªå‹ç¼©æ•°æ®éƒ½ä»æ–‡ä»¶çš„å¼€å§‹ä½ç½®ä»¥æŒ‡å®šçš„å¯¹é½æ–¹å¼æ’åˆ—ç­¾åï¼Œé€‰æ‹©Signature V2</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">commandLine &quot;&#123;å‘½ä»¤æ‰§è¡Œç¬¦å·&#125;&quot;,&quot;-c&quot;, &quot;&#123;zipalignå·¥å…·çš„æ–‡ä»¶è·¯å¾„&#125; -v -p 4  &#123;å·²åŠ å›ºçš„apkæ–‡ä»¶è·¯å¾„&#125; &#123;å¯¹é½åè¾“å‡ºçš„apkæ–‡ä»¶è·¯å¾„&#125;&quot;</span><br><span class="line">commandLine &quot;&#123;å‘½ä»¤æ‰§è¡Œç¬¦å·&#125;&quot;, &quot;-c&quot;, &quot;&#123;apksignerå·¥å…·çš„æ–‡ä»¶è·¯å¾„&#125; sign --ks &#123;ç­¾åæ–‡ä»¶çš„ä½ç½®&#125; --ks-key-alias &#123;aliasåˆ«å&#125; --ks-pass pass:&#123;ç­¾åæ–‡ä»¶å­˜å‚¨çš„å¯†ç &#125; --key-pass pass:&#123;aliaså¯†ç &#125; --out &#123;ç­¾ååè¾“å‡ºçš„apkæ–‡ä»¶&#125; &#123;å¯¹é½åè¾“å‡ºçš„apkæ–‡ä»¶è·¯å¾„&#125;&quot;</span><br></pre></td></tr></table></figure>
<h4 id="å¤šæ¸ é“æ‰“åŒ…"><a href="#å¤šæ¸ é“æ‰“åŒ…" class="headerlink" title="å¤šæ¸ é“æ‰“åŒ…"></a>å¤šæ¸ é“æ‰“åŒ…</h4><p>â€‹ç­¾åå®Œæˆå, ä½¿ç”¨walleè¿›è¡Œå¤šæ¸ é“æ‰“åŒ…å¹³æ—¶ä½¿ç”¨walleå¤šæ¸ é“æ‰“åŒ…ï¼Œåªéœ€è¦åœ¨app/build.gradleä¸‹é…ç½®æ’ä»¶ï¼ŒæŒ‡å®šæ¸ é“åŒ…çš„è¾“å‡ºè·¯å¾„å’Œæ¸ é“é…ç½®æ–‡ä»¶å³ å¯ï¼Œæœ€ååœ¨Android studioçš„Terminalä¸­è¾“å…¥./gradlew assembleReleaseChannelsï¼Œä»»åŠ¡æ‰§è¡Œå®Œæˆååœ¨æŒ‡å®šçš„ è¾“å‡ºè·¯å¾„ä¸‹ç”Ÿæˆå¤šä¸ªå¯¹åº”çš„æ¸ é“åŒ…ã€‚å…·ä½“çš„æµç¨‹å’Œç»†èŠ‚å¯å‚è€ƒå®˜æ–¹ä»‹ç»ã€‚</p>
<p>â€‹ è¿™ç§å¤šæ¸ é“æ‰“åŒ…æ–¹å¼æ˜¯å…¨è‡ªåŠ¨åŒ–æ„å»ºï¼Œå¾ˆéš¾å»å¹²æ¶‰åˆ°æ„å»ºæµç¨‹ï¼Œä¸ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚</p>
<p>åœ¨app/build.gradleé…ç½®æ’ä»¶æ—¶ï¼Œåœ¨å®˜æ–¹ä»‹ç»ä¸­å¹¶æ²¡æœ‰æ‰¾åˆ°æŒ‡å®šæºAPKè¾“å…¥è·¯å¾„çš„æ–¹å¼ï¼Œä¼°è®¡æ‰“åŒ…æ’ä»¶é»˜è®¤ä½¿ç”¨çš„æ˜¯app/build/outputs/apk/releaseä¸‹çš„apkæ–‡ä»¶ï¼Œè¿™æ ·å°±æ²¡åŠæ³•å¯¹ä¸åŒæ–‡ä»¶è·¯å¾„ä¸‹çš„å·²åŠ å›ºapkåŒ…è¿›è¡Œå¤šæ¸ é“æ‰“åŒ…ã€‚</p>
<p>æ‰“åŒ…ä»»åŠ¡è®¾ç½®åœ¨assembleReleaseä¹‹åæ‰§è¡Œï¼Œè¿™ä¸ªæ‰§è¡Œä¾èµ–å°è£…åœ¨æ’ä»¶å†…éƒ¨ï¼Œå¤–éƒ¨å¾ˆéš¾ä¿®æ”¹æ‰“åŒ…ä»»åŠ¡ä¾èµ–äºåŠ å›ºä»»åŠ¡ï¼Œåœ¨åŠ å›ºä»»åŠ¡ä¹‹åæ‰§è¡Œã€‚</p>
<p>é™¤äº†ä¸Šé¢çš„å¤šæ¸ é“æ‰“åŒ…æ–¹å¼ä¹‹åï¼Œwalleè¿˜æä¾›äº†å¦å¤–ä¸€ç§å¤šæ¸ é“æ‰“åŒ…æ–¹å¼ï¼Œç”¨å‘½ä»¤è¡Œæ‰§è¡Œwalleæä¾›çš„walle-cli-all.jaræ‰§è¡Œæ‰“åŒ…æ“ä½œï¼Œåªéœ€è¦ä¸€æ¡æ‰“åŒ…å‘½ä»¤å³å¯å®Œæˆæ‰“åŒ…ã€‚</p>
<p>commandLine â€œshâ€, â€œ-câ€, â€œjava -jar {walle-cli-all.jaræ–‡ä»¶è·¯å¾„} batch -f {æ¸ é“æ–‡ä»¶è·¯å¾„} {è¦åŠ æ¸ é“çš„apkæ–‡ä»¶è·¯å¾„} {æ¸ é“åŒ…çš„è¾“å‡ºè·¯å¾„}â€<br>walle-cli-all.jaræ–‡ä»¶ä¸‹è½½åœ°å€ï¼šå®˜æ–¹:walle-cli-all.jar, å…¶ä»–å¼€å‘æä¾›çš„ç¼–è¯‘ç‰ˆæœ¬</p>
<p>è¿™é‡Œä¸ºä»€ä¹ˆä¼šæœ‰ä¸¤ä¸ªç‰ˆæœ¬å‘¢! å› ä¸ºå‘ç°äº†ä¸€ä¸ªæ¯”è¾ƒå‘çš„åœ°æ–¹å®˜æ–¹çš„ç‰ˆæœ¬æ‰“å®ŒåŒ…ä¼šå‘ç°åœ¨ç³»ç»Ÿ9.0ï¼ˆPï¼‰ä¸‹æ— æ³•æ­£å¸¸å®‰è£…, ç›¸å…³é—®é¢˜å¯ä»¥æŸ¥çœ‹Issue, å½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå·±æ‹‰å–æºç ç¼–è¯‘</p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidè‡ªåŠ¨åŒ–æ‰“åŒ…è„šæœ¬</title>
    <url>/2020/09/02/Android/Android%E8%87%AA%E5%8A%A8%E5%8C%96%E6%89%93%E5%8C%85%E8%84%9A%E6%9C%AC/</url>
    <content><![CDATA[<p> å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<a id="more"></a>

<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//env.PROJ_DIR=&#x27;src/learningGo&#x27;</span></span><br><span class="line"><span class="keyword">def</span> VERSIONNAME</span><br><span class="line"><span class="keyword">def</span> VERSIONCODE</span><br><span class="line">pipeline &#123;</span><br><span class="line">    agent any</span><br><span class="line">    <span class="comment">// å®šä¹‰pipelineæˆ–è€…pluginçš„å‚æ•°è®¾ç½®ã€‚</span></span><br><span class="line">    <span class="comment">//é…ç½®gradleç‰ˆæœ¬</span></span><br><span class="line">    tools &#123;</span><br><span class="line">            gradle <span class="string">&quot;gradle-5.4.1&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    options &#123;</span><br><span class="line">        <span class="comment">// ä¸€æ—¶é—´æœ€å¤šåªå…è®¸ä¸€ä¸ªpipelineè¿è¡Œï¼Œå¦‚æœå‰é¢çš„ä»åœ¨è¿è¡Œï¼Œ åé¢çš„å°†ä¼šç­‰å¾…çŠ¶æ€ã€‚</span></span><br><span class="line">        disableConcurrentBuilds()</span><br><span class="line">        <span class="comment">// å¤±è´¥äº†ï¼Œé‡è¯•ä¸€æ¬¡ã€‚</span></span><br><span class="line">        retry(<span class="number">1</span>)</span><br><span class="line">        <span class="comment">// å¦‚æœæŸä¸ªstageä¸ºunstableçŠ¶æ€ï¼Œåˆ™å¿½ç•¥åé¢çš„ä»»åŠ¡ï¼Œç›´æ¥é€€å‡ºã€‚</span></span><br><span class="line">        skipStagesAfterUnstable()</span><br><span class="line">        <span class="comment">// 40åˆ†é’Ÿçš„è¶…æ—¶è®¾ç½®ã€‚</span></span><br><span class="line">        timeout(<span class="attr">time:</span> <span class="number">40</span>, <span class="attr">unit:</span> <span class="string">&#x27;MINUTES&#x27;</span>)</span><br><span class="line">        <span class="comment">// è¾“å‡ºé¢œè‰²æ§åˆ¶</span></span><br><span class="line">        ansiColor(<span class="string">&#x27;xterm&#x27;</span>)</span><br><span class="line">        <span class="comment">// ä¿æŒæ„å»ºçš„æœ€å¤§ä¸ªæ•°</span></span><br><span class="line">        buildDiscarder(logRotator(<span class="attr">numToKeepStr:</span> <span class="string">&#x27;30&#x27;</span>))</span><br><span class="line">        <span class="comment">// å¿½ç•¥é»˜è®¤æ£€å‡ºä»£ç è¿‡ç¨‹</span></span><br><span class="line">        skipDefaultCheckout <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å®šä¹‰å…¬ç”¨çš„ç¯å¢ƒå˜é‡</span></span><br><span class="line">     parameters &#123;</span><br><span class="line">        choice(<span class="attr">name:</span> <span class="string">&#x27;EnvironMent_Deploy&#x27;</span>, <span class="attr">choices:</span> <span class="string">&#x27;TEST\nONLINE\nPREPARE&#x27;</span>, <span class="attr">description:</span> <span class="string">&#x27;æµ‹è¯•ç¯å¢ƒTESTæ­£å¼ç¯å¢ƒONLINEé¢„å‘å¸ƒç¯å¢ƒPREPARE&#x27;</span>)</span><br><span class="line">        choice(<span class="attr">name:</span> <span class="string">&#x27;BUILDTASK&#x27;</span>, <span class="attr">choices:</span> <span class="string">&#x27;å•æ¸ é“æ‰“åŒ…\nå¤šæ¸ é“æ‰“åŒ…&#x27;</span>, <span class="attr">description:</span> <span class="string">&#x27;å•æ¸ é“æ‰“åŒ…orå¤šæ¸ é“æ‰“åŒ…&#x27;</span>)</span><br><span class="line">     &#125;  </span><br><span class="line">    environment &#123;</span><br><span class="line">      <span class="keyword">def</span> sonarqubeScannerHome = tool <span class="attr">name:</span> <span class="string">&#x27;sonar-scanner-4.4&#x27;</span></span><br><span class="line">      NUMBER = <span class="string">&quot;$&#123;env.BUILD_NUMBER&#125;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    stages &#123;</span><br><span class="line">        stage(<span class="string">&#x27;æ£€å‡ºä»£ç &#x27;</span>) &#123;</span><br><span class="line">          steps &#123;</span><br><span class="line">                checkout scm</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        stage(<span class="string">&#x27;æ¸…ç†å·¥ç¨‹&#x27;</span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                sh <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">                ./gradlew clean</span></span><br><span class="line"><span class="string">                &#x27;&#x27;&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        stage(<span class="string">&#x27;ä»£ç æ£€æŸ¥&#x27;</span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                sh <span class="string">&#x27;./gradlew lint&#x27;</span></span><br><span class="line">                step([<span class="attr">$class:</span> <span class="string">&#x27;LintPublisher&#x27;</span>, <span class="attr">pattern:</span> <span class="string">&#x27;app/build/reports/lint-results*.xml&#x27;</span>])</span><br><span class="line">                withSonarQubeEnv(<span class="string">&#x27;sonarqube&#x27;</span>) &#123;</span><br><span class="line">                    sh <span class="string">&quot;$&#123;sonarqubeScannerHome&#125;/bin/sonar-scanner -X &quot;</span> +</span><br><span class="line">                    <span class="string">&quot;-Dsonar.login=admin &quot;</span> +</span><br><span class="line">                    <span class="string">&quot;-Dsonar.password=QB-XwcVyohvdjj7GEQntymCC &quot;</span> +</span><br><span class="line">                    <span class="string">&quot;-Dsonar.projectKey=android-jenkins &quot;</span> +</span><br><span class="line">                    <span class="string">&quot;-Dsonar.projectName=android-jenkins &quot;</span> +</span><br><span class="line">                    <span class="string">&quot;-Dssonar.projectVersion=1.$&#123;NUMBER&#125; &quot;</span> +</span><br><span class="line">                    <span class="string">&quot;-Dsonar.language=java &quot;</span> +</span><br><span class="line">                    <span class="string">&quot;-Dsonar.sources=. &quot;</span> +</span><br><span class="line">                    <span class="string">&quot;-Dsonar.java.binaries=. &quot;</span> +</span><br><span class="line">                    <span class="string">&quot;-Dsonar.exclusions=**/build/**/*.*  &quot;</span> +</span><br><span class="line">                    <span class="string">&quot;-Dsonar.sourceEncoding=UTF-8 &quot;</span> </span><br><span class="line">                    &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        stage(<span class="string">&#x27;ç¼–è¯‘æ„å»º&#x27;</span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">               sh <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">                if [ &quot;$&#123;BUILDTASK&#125;&quot; == &#x27;å•æ¸ é“æ‰“åŒ…&#x27; ];then</span></span><br><span class="line"><span class="string">                    ./gradlew app:assembleRelease</span></span><br><span class="line"><span class="string">                fi</span></span><br><span class="line"><span class="string">                if [ &quot;$&#123;BUILDTASK&#125;&quot; == &#x27;å¤šæ¸ é“æ‰“åŒ…&#x27; ];then</span></span><br><span class="line"><span class="string">                    ./gradlew app:assembleReinforceRelease</span></span><br><span class="line"><span class="string">                fi</span></span><br><span class="line"><span class="string">               &#x27;&#x27;&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        stage(<span class="string">&#x27;æ‰“åŒ…å½’æ¡£&#x27;</span>) &#123;</span><br><span class="line">             steps &#123;</span><br><span class="line">               sh <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">                if [ &quot;$&#123;BUILDTASK&#125;&quot; == &#x27;å¤šæ¸ é“æ‰“åŒ…&#x27; ];then</span></span><br><span class="line"><span class="string">                    savePath=&quot;/data/packages/apk&quot;</span></span><br><span class="line"><span class="string">                    localPath=&quot;app/build/outputs/&quot;</span></span><br><span class="line"><span class="string">                    folderName=&quot;channels&quot;</span></span><br><span class="line"><span class="string">                    folderPath=&quot;$&#123;localPath&#125;$&#123;folderName&#125;&quot;</span></span><br><span class="line"><span class="string">                    echo $folderPath</span></span><br><span class="line"><span class="string">                    currentTime=`date +%Yå¹´%mæœˆ%dæ—¥%Hæ—¶%Måˆ†`</span></span><br><span class="line"><span class="string">                    ls -l</span></span><br><span class="line"><span class="string">                    if [ 0 -eq `ls $folderPath | wc -w` ] ;then</span></span><br><span class="line"><span class="string">                        exit 2000</span></span><br><span class="line"><span class="string">                    fi</span></span><br><span class="line"><span class="string">                    echo $savePath</span></span><br><span class="line"><span class="string">                    cp -a $folderPath $savePath</span></span><br><span class="line"><span class="string">                    cd $savePath</span></span><br><span class="line"><span class="string">                    ls -l</span></span><br><span class="line"><span class="string">                    mv $folderName $currentTime</span></span><br><span class="line"><span class="string">                    //è¿œç«¯å­˜å‚¨</span></span><br><span class="line"><span class="string">                    scp -r ..</span></span><br><span class="line"><span class="string">                elif [ &quot;$&#123;BUILDTASK&#125;&quot; == &#x27;å•æ¸ é“æ‰“åŒ…&#x27; ];then</span></span><br><span class="line"><span class="string">                    </span></span><br><span class="line"><span class="string">                         apkPath=&quot;app/build/outputs/apk/release/&quot;</span></span><br><span class="line"><span class="string">                                </span></span><br><span class="line"><span class="string">                find $apkPath -name &quot;*.apk&quot; | while read path</span></span><br><span class="line"><span class="string">                do </span></span><br><span class="line"><span class="string">                    //fir-token</span></span><br><span class="line"><span class="string">                    fir_token=&quot;ï¼Ÿï¼Ÿï¼Ÿ&quot;</span></span><br><span class="line"><span class="string">                    fir publish $path --token=$&#123;fir_token&#125;</span></span><br><span class="line"><span class="string">                done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                fi</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">               &#x27;&#x27;&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        stage(<span class="string">&#x27;é’‰é’‰é€šçŸ¥&#x27;</span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                sh <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">                /bin/bash</span></span><br><span class="line"><span class="string">                export LANG=en_US.UTF-8</span></span><br><span class="line"><span class="string">                 VERSIONCODE=$(cat config.gradle | grep versionCode|awk -F: &#x27;&#123;print $2&#125;&#x27;|awk -F, &#x27;&#123;print $1&#125;&#x27;)</span></span><br><span class="line"><span class="string">                 VERSIONNAME=$(cat config.gradle | grep versionName|awk -F: &#x27;&#123;print $2&#125;&#x27;|awk -F, &#x27;&#123;print $1&#125;&#x27;)</span></span><br><span class="line"><span class="string">                appVersion=`echo $VERSIONNAME|sed &#x27;s/\&quot;//g&#x27;`</span></span><br><span class="line"><span class="string">                appVersionCode=$VERSIONCODE</span></span><br><span class="line"><span class="string">                appBundleId=&quot;&quot;</span></span><br><span class="line"><span class="string">                platform=&quot;Android&quot;</span></span><br><span class="line"><span class="string">                ReleaseNotes=&quot;è‡ªåŠ¨æ‰“åŒ…&quot;</span></span><br><span class="line"><span class="string">                //é’‰é’‰token</span></span><br><span class="line"><span class="string">                accessToken=&quot;??&quot;</span></span><br><span class="line"><span class="string">                downloadUrl=&quot;https://apk.mocaapp.cn/&quot;</span></span><br><span class="line"><span class="string">                if [ &quot;$&#123;BUILDTASK&#125;&quot; == &#x27;å•æ¸ é“æ‰“åŒ…&#x27; ];then</span></span><br><span class="line"><span class="string">                    downloadUrl=&quot;http://fir.mocaapp.cn/7vd6&quot;</span></span><br><span class="line"><span class="string">                fi</span></span><br><span class="line"><span class="string">                url=&quot;https://oapi.dingtalk.com/robot/send?access_token=$accessToken&quot;</span></span><br><span class="line"><span class="string">                header=&quot;Content-Type: application/json&quot;</span></span><br><span class="line"><span class="string">                title=&quot;$APPNAME($platform)æ›´æ–°&quot;</span></span><br><span class="line"><span class="string">                text=&quot;[$APPNAME($platform)æ›´æ–°]($downloadUrl)\\n ![$APPNAME]($ICON_URL)\\n é“¾æ¥:[$downloadUrl]($downloadUrl)\n ç‰ˆæœ¬: $appVersion (Build: $appVersionCode)\n æ›´æ–°å†…å®¹: $ReleaseNotes\n&quot;</span></span><br><span class="line"><span class="string">                rawData=&quot;&#123;\\&quot;msgtype\\&quot;:\\&quot;actionCard\\&quot;, \\&quot;actionCard\\&quot;: &#123; \\&quot;title\\&quot;: \\&quot;$&#123;title&#125;\\&quot;, \\&quot;text\\&quot;: \\&quot;$&#123;text&#125;\\&quot;, \\&quot;hideAvatar\\&quot;: \\&quot;0\\&quot;, \\&quot;btnOrientation\\&quot;: \\&quot;0\\&quot;, \\&quot;singleTitle\\&quot;: \\&quot;\\&quot; &#125;&#125;&quot;</span></span><br><span class="line"><span class="string">                res=`curl --request POST &quot;$url&quot; -H &quot;$header&quot; --data &quot;$rawData&quot;`</span></span><br><span class="line"><span class="string">                if [ $&#123;#res&#125; != 27 ];then</span></span><br><span class="line"><span class="string">                  exit 1002</span></span><br><span class="line"><span class="string">                fi</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                &#x27;&#x27;&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>å¸ƒå±€ç»˜åˆ¶è§£æ</title>
    <url>/2020/09/21/Android/%E5%B8%83%E5%B1%80%E7%BB%98%E5%88%B6%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[<p>ä¸€èˆ¬è‡ªå®šä¹‰Viewå¯ä»¥åˆ†ä¸º3ä¸ªéƒ¨åˆ†ï¼Œå¸ƒå±€ï¼Œç»˜åˆ¶ï¼Œè§¦æ‘¸åé¦ˆã€‚å¸ƒå±€è¿‡ç¨‹å¯ä»¥ç†è§£ä¸ºå¯¹ç»˜åˆ¶å’Œè§¦æ‘¸åé¦ˆçš„æ”¯æ’‘ï¼Œæ˜¯å†³å®šäº†ç»˜åˆ¶ä½ç½®å’Œè§¦æ‘¸äº‹ä»¶ä½ç½®çš„å…³é”®ç‚¹ã€‚</p>
<a id="more"></a>

<h4 id="Viewå¸ƒå±€ç»˜åˆ¶æµç¨‹"><a href="#Viewå¸ƒå±€ç»˜åˆ¶æµç¨‹" class="headerlink" title="Viewå¸ƒå±€ç»˜åˆ¶æµç¨‹"></a>Viewå¸ƒå±€ç»˜åˆ¶æµç¨‹</h4><h5 id="æ•´ä½“ä¸Šçœ‹"><a href="#æ•´ä½“ä¸Šçœ‹" class="headerlink" title="æ•´ä½“ä¸Šçœ‹"></a>æ•´ä½“ä¸Šçœ‹</h5><ul>
<li>æµ‹é‡æµç¨‹ï¼š<br>  ä»æ ¹Viewé€’å½’è°ƒç”¨æ¯ä¸€çº§å­Viewçš„measure()æ–¹æ³•ï¼Œå…ˆå¯¹æ¯ä¸ªå­Viewè¿›è¡Œæµ‹é‡ã€‚ç„¶åçˆ¶Viewæ ¹æ®å­Viewçš„æµ‹é‡æ•°æ®å†³å®šçœŸå®çš„å¤§å°å’Œä½ç½®ã€‚</li>
<li>ç»˜åˆ¶æµç¨‹ï¼š<br>  ä»æ ¹Viewé€’å½’è°ƒç”¨æ¯ä¸€çº§å­Viewçš„layout()æ–¹æ³•ï¼ŒæŠŠæµ‹é‡å®Œæˆåè·å¾—çš„å­Viewçš„ä½ç½®å’Œå°ºå¯¸ä¼ å›ç»™å­Viewï¼Œå­Viewä¿å­˜ã€‚</li>
</ul>
<h5 id="ä¸ªä½“ä¸Šçœ‹ï¼ˆä»Viewçš„è§’åº¦ï¼‰"><a href="#ä¸ªä½“ä¸Šçœ‹ï¼ˆä»Viewçš„è§’åº¦ï¼‰" class="headerlink" title="ä¸ªä½“ä¸Šçœ‹ï¼ˆä»Viewçš„è§’åº¦ï¼‰"></a>ä¸ªä½“ä¸Šçœ‹ï¼ˆä»Viewçš„è§’åº¦ï¼‰</h5><p>1ã€çˆ¶Viewæ ¹æ®å¼€å‘è€…åœ¨xmlä¸­å†™çš„å¯¹å­Viewçš„è¦æ±‚ï¼Œå’Œè‡ªå·±çš„å¯ç”¨ç©ºé—´ï¼Œå¾—å‡ºå¯¹å­Viewçš„å…·ä½“å°ºå¯¸è¦æ±‚ã€‚<br>2ã€å­Viewåœ¨è‡ªå·±çš„onMeasure()ä¸­ï¼Œæ ¹æ®çˆ¶Viewçš„è¦æ±‚ä»¥åŠè‡ªå·±çš„ç‰¹æ€§ç®—å‡ºè‡ªå·±çš„æœŸæœ›å°ºå¯¸ã€‚ï¼ˆä»¥çˆ¶Viewçš„è¦æ±‚ä½œä¸ºæ›´é«˜ä¼˜å…ˆçº§ï¼Œå› ä¸ºçˆ¶Viewçš„è¦æ±‚åŒ…å«å¼€å‘è€…çš„è¦æ±‚ï¼‰ï¼Œå¦‚æœæ˜¯viewgroupè¿˜ä¼šè°ƒç”¨æ¯ä¸ªå­Viewçš„measure()è¿›è¡Œæµ‹é‡ã€‚<br>3ã€çˆ¶Viewåœ¨å­Viewè®¡ç®—å‡ºæœŸæœ›å°ºå¯¸åï¼Œå¾—å‡ºå­Viewçš„å®é™…å°ºå¯¸å’Œä½ç½®ã€‚<br>4ã€å­Viewåœ¨è‡ªå·±çš„layoutæ–¹æ³•ä¸­ï¼Œå°†çˆ¶Viewä¼ é€’è¿‡æ¥çš„å®é™…å°ºå¯¸å’Œä½ç½®è¿›è¡Œä¿å­˜ã€‚</p>
<h4 id="è‡ªå®šä¹‰å¸ƒå±€çš„å…·ä½“å®ç°"><a href="#è‡ªå®šä¹‰å¸ƒå±€çš„å…·ä½“å®ç°" class="headerlink" title="è‡ªå®šä¹‰å¸ƒå±€çš„å…·ä½“å®ç°"></a>è‡ªå®šä¹‰å¸ƒå±€çš„å…·ä½“å®ç°</h4><ul>
<li><p>é‡å†™onMeasure()ï¼Œæ”¹å˜å¸ƒå±€çš„å°ºå¯¸,æˆ–è€…å¯¹Viewå®Œå…¨è¿›è¡Œè‡ªå®šä¹‰å°ºå¯¸è®¡ç®—ã€‚<br>  å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>ç”¨getMeasuredWidthï¼ˆï¼‰å’ŒgetMeasuredHeight()è·å–åˆ°æµ‹é‡å‡ºçš„å°ºå¯¸ã€‚</li>
<li>è®¡ç®—å‡ºæœ€ç»ˆè¦çš„å°ºå¯¸</li>
<li>ç”¨setMeasuredDimension(width,height)ä¿å­˜ç»“æœ</li>
</ul>
</li>
</ul>
<p>eg:å¦‚æœåªä¿®æ”¹layoutå°†ä¸ä¼šé€šçŸ¥çˆ¶å¸ƒå±€ï¼Œæ‰€ä»¥è¦é‡å†™onMeasure()<br><img src="media/16007596264312.jpg" alt="-w269"></p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å°†å¸ƒå±€è½¬æ¢ä¸ºæ–¹å½¢</span></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onMeasure</span><span class="params">(widthMeasureSpec: <span class="type">Int</span>, heightMeasureSpec: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec)</span><br><span class="line">    <span class="keyword">val</span> size = min(measuredWidth,measuredHeight)</span><br><span class="line">    setMeasuredDimension(size,size)</span><br><span class="line">    </span><br><span class="line">&#125;    </span><br></pre></td></tr></table></figure>
<p>å¸ƒå±€ä¿®æ­£ï¼š å› ä¸ºè‡ªå®šä¹‰å¸ƒå±€çš„è¦å—åˆ°çˆ¶å¸ƒå±€çš„é™åˆ¶ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œå¸ƒå±€ä¿®æ­£<br>ç”¨resolveSize()æˆ–è€…resolveSizeAndState()ä¿®æ­£ç»“æœã€‚</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onMeasure</span><span class="params">(widthMeasureSpec: <span class="type">Int</span>, heightMeasureSpec: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> size = ((radius+padding) * <span class="number">2</span>).toInt()</span><br><span class="line">    <span class="keyword">val</span> width = View.resolveSize(size,widthMeasureSpec)</span><br><span class="line">    <span class="keyword">val</span> height = View.resolveSize(size,heightMeasureSpec)</span><br><span class="line">    setMeasuredDimension(width,height)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>é‡å†™onLayout()å’ŒonMeasure()<br>eg:TagLayout </li>
</ul>
]]></content>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>macå¸¸ç”¨è½¯ä»¶åŠå®‰è£…</title>
    <url>/2020/09/14/others/mac%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6%E5%8F%8A%E5%AE%89%E8%A3%85/</url>
    <content><![CDATA[<p>é˜…è¯»å…¨æ–‡                                                                                                                                                                                                                                                                                                                                                                              </p>
<a id="more"></a>

<h4 id="Macå¸¸ç”¨è½¯ä»¶"><a href="#Macå¸¸ç”¨è½¯ä»¶" class="headerlink" title="Macå¸¸ç”¨è½¯ä»¶"></a>Macå¸¸ç”¨è½¯ä»¶</h4><p>ç½‘ç›˜é“¾æ¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">é“¾æ¥: https:&#x2F;&#x2F;pan.baidu.com&#x2F;s&#x2F;1kzpfZ0-GK2pr1uFs_MyDLw</span><br><span class="line">å¯†ç : taei</span><br></pre></td></tr></table></figure>
<p>åŒ…å«ï¼Œæœç‹—è¾“å…¥æ³•ï¼Œandroidstudioï¼Œç™¾åº¦ç½‘ç›˜ï¼Œclashxr,cleanMyMac4.6,å¾®ä¿¡ï¼Œchromeï¼Œsublime Textç­‰è½¯ä»¶ã€‚</p>
<h4 id="å¸¸ç”¨å·¥å…·å®‰è£…"><a href="#å¸¸ç”¨å·¥å…·å®‰è£…" class="headerlink" title="å¸¸ç”¨å·¥å…·å®‰è£…"></a>å¸¸ç”¨å·¥å…·å®‰è£…</h4><p>1ã€iTerm2çš„å®‰è£…åŠé…ç½®</p>
<blockquote>
<p><a href="https://rencheng.cc/2016/08/16/tools/macos/Iterm2%E9%85%8D%E7%BD%AE/?highlight=iterm2e">https://rencheng.cc/2016/08/16/tools/macos/Iterm2%E9%85%8D%E7%BD%AE/?highlight=iterm2e</a></p>
</blockquote>
<p>2ã€Homebrewçš„å®‰è£…åŠé…ç½®</p>
<blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/111014448">https://zhuanlan.zhihu.com/p/111014448</a></p>
</blockquote>
<p>å®‰è£…è„šæœ¬</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/bin/zsh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure>
<p>å¸è½½è„šæœ¬</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/bin/zsh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/HomebrewUninstall.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure>
<p> 3ã€MWebç ´è§£ç‰ˆä¸‹è½½</p>
<blockquote>
<p><a href="https://www.macwk.com/soft/mweb">https://www.macwk.com/soft/mweb</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>Others</tag>
      </tags>
  </entry>
  <entry>
    <title>Kotlinæ•°ç»„ä¸é›†åˆçš„æ“ä½œç¬¦</title>
    <url>/2020/09/01/Kotin/Kotin%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01/</url>
    <content><![CDATA[<p>Kotlin ä¸­ï¼Œè¿˜ä¸ºæˆ‘ä»¬æä¾›äº†è®¸å¤šä½¿æ•°ç»„ä¸é›†åˆæ“ä½œèµ·æ¥æ›´åŠ æ–¹ä¾¿çš„å‡½æ•°,ä»¥ä¸‹é¢çš„é›†åˆå’Œæ•°ç»„ä¸ºä¾‹è¯´æ˜ã€‚</p>
<a id="more"></a>

<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> intArray = intArrayOf(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="keyword">val</span> strList = listOf(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>)</span><br></pre></td></tr></table></figure>
<h4 id="forEachï¼ˆéå†ï¼‰"><a href="#forEachï¼ˆéå†ï¼‰" class="headerlink" title="forEachï¼ˆéå†ï¼‰"></a>forEachï¼ˆéå†ï¼‰</h4><figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">  <span class="comment">//              ğŸ‘‡ lambda è¡¨è¾¾å¼ï¼Œi è¡¨ç¤ºæ•°ç»„çš„æ¯ä¸ªå…ƒç´ </span></span><br><span class="line">intArray.forEach &#123; i -&gt;</span><br><span class="line">    print(i + <span class="string">&quot; &quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š1 2 3   </span></span><br></pre></td></tr></table></figure>

<p>foreachè¡¨ç¤ºéå†æ•°ç»„æˆ–è€…é›†åˆä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œå…¶ä¸­çš„iæŒ‡ä»£å…·ä½“çš„å…ƒç´ </p>
<h4 id="filterï¼ˆè¿‡æ»¤ï¼‰"><a href="#filterï¼ˆè¿‡æ»¤ï¼‰" class="headerlink" title="filterï¼ˆè¿‡æ»¤ï¼‰"></a>filterï¼ˆè¿‡æ»¤ï¼‰</h4><figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">// [1, 2, 3]</span></span><br><span class="line">      â¬‡ï¸</span><br><span class="line"><span class="comment">//  &#123;2, 3&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//            ğŸ‘‡ æ³¨æ„ï¼Œè¿™é‡Œå˜æˆäº† List</span></span><br><span class="line"><span class="keyword">val</span> newList: List = intArray.filter &#123; i -&gt;</span><br><span class="line">    i != <span class="number">1</span> <span class="comment">// ğŸ‘ˆ è¿‡æ»¤æ‰æ•°ç»„ä¸­ç­‰äº 1 çš„å…ƒç´ </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>filterè¡¨ç¤ºå¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œè¿‡æ»¤æ“ä½œï¼Œå¦‚æœlambdaè¡¨è¾¾å¼ä¸­çš„æ¡ä»¶æˆç«‹åˆ™ç•™ä¸‹å…ƒç´ ï¼Œå¦åˆ™å‰”é™¤ï¼Œæœ€ç»ˆç”Ÿæˆæ–°çš„é›†åˆã€‚</p>
<h4 id="map-éå†ç”Ÿæˆæ–°çš„é›†åˆ"><a href="#map-éå†ç”Ÿæˆæ–°çš„é›†åˆ" class="headerlink" title="map(éå†ç”Ÿæˆæ–°çš„é›†åˆ)"></a>map(éå†ç”Ÿæˆæ–°çš„é›†åˆ)</h4><figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  [1, 2, 3]</span></span><br><span class="line">       â¬‡ï¸</span><br><span class="line"><span class="comment">//  &#123;2, 3, 4&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> newList: List = intArray.map &#123; i -&gt;</span><br><span class="line">    i + <span class="number">1</span> <span class="comment">// ğŸ‘ˆ æ¯ä¸ªå…ƒç´ åŠ  1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>mapä¼šéå†æ¯ä¸ªå…ƒç´ ï¼Œå¹¶æ‰§è¡ŒæŒ‡å®šè¡¨è¾¾å¼ï¼Œæœ€ç»ˆå½¢æˆæ–°çš„é›†åˆã€‚</p>
<h4 id="flatmapï¼ˆæ•°ç»„é™ç»´æ‰“å¹³ï¼‰"><a href="#flatmapï¼ˆæ•°ç»„é™ç»´æ‰“å¹³ï¼‰" class="headerlink" title="flatmapï¼ˆæ•°ç»„é™ç»´æ‰“å¹³ï¼‰"></a>flatmapï¼ˆæ•°ç»„é™ç»´æ‰“å¹³ï¼‰</h4><figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">//          [1, 2, 3]</span></span><br><span class="line">               â¬‡ï¸</span><br><span class="line"><span class="comment">// &#123;&quot;2&quot;, &quot;a&quot; , &quot;3&quot;, &quot;a&quot;, &quot;4&quot;, &quot;a&quot;&#125;</span></span><br><span class="line"></span><br><span class="line">intArray.flatMap &#123; i -&gt;</span><br><span class="line">    listOf(<span class="string">&quot;<span class="subst">$&#123;i + <span class="number">1</span>&#125;</span>&quot;</span>, <span class="string">&quot;a&quot;</span>) <span class="comment">// ğŸ‘ˆ ç”Ÿæˆæ–°é›†åˆ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title>kotlinå­¦ä¹ å¾ªç¯ä¸éå†</title>
    <url>/2020/09/16/Kotlin/Kotlin%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02/</url>
    <content><![CDATA[<h4 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h4><h5 id="repeatå‡½æ•°"><a href="#repeatå‡½æ•°" class="headerlink" title="repeatå‡½æ•°"></a>repeatå‡½æ•°</h5><p>å¯ä»¥ä½¿ç”¨repeatå‡½æ•°</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">repeat(<span class="number">100</span>)&#123;</span><br><span class="line">    println(it)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>repeatå‡½æ•°åé¢æ¥æ”¶çš„ä¸¤ä¸ªå‚æ•°å¯¹åº”çš„Intæ¬¡æ•°å’Œlambdaè¡¨è¾¾å¼ã€‚</p>
<h5 id="foriå¾ªç¯"><a href="#foriå¾ªç¯" class="headerlink" title="foriå¾ªç¯"></a>foriå¾ªç¯</h5><p>kotlinä¸­çš„foriå¾ªç¯é‡‡ç”¨çš„æ˜¯åŒºé—´æ–¹å¼</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">0</span>..<span class="number">99</span>)&#123;</span><br><span class="line">    println(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨untilæ‰©å±•å‡½æ•°ï¼Œå…¶ä¸­untilä¸åŒ…å«å³è¾¹ç•Œã€‚</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> arrayTest = arrayListOf&lt;<span class="built_in">Int</span>&gt;(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">0</span> until arrayTest.size)&#123;</span><br><span class="line">    println(arrayTest[i])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœéå†æ•°ç»„å¯ä»¥ä½¿ç”¨æ•°ç»„è‡ªå¸¦çš„indicesæ‰©å±•æ–¹æ³•</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> arrayTest = arrayOf(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> arrayTest.indices)&#123;</span><br><span class="line">    println(arrayTest[i])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å‡½æ•°åµŒå¥—"><a href="#å‡½æ•°åµŒå¥—" class="headerlink" title="å‡½æ•°åµŒå¥—"></a>å‡½æ•°åµŒå¥—</h5><p>kotlinä¸­æ”¯æŒå‡½æ•°åµŒå¥—ï¼Œå†…éƒ¨å‡½æ•°åªèƒ½è¢«è¢«åµŒå¥—çš„å‡½æ•°è°ƒç”¨ï¼Œå†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®è¢«åµŒå¥—å‡½æ•°çš„å˜é‡ã€‚å‡½æ•°åµŒå¥—ä¼šåœ¨åˆ›å»ºçš„æ—¶å€™è°ƒç”¨ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ã€‚</p>
<p><strong>æ‰€ä»¥ä¸è¦åœ¨é¢‘ç¹è°ƒç”¨çš„æ–¹æ³•å†…æ‰§è¡Œå‡½æ•°åµŒå¥—</strong></p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">val</span> a = <span class="number">5</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        println(a)</span><br><span class="line">    &#125;</span><br><span class="line">    test2()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å†…è”å‡½æ•°ï¼ˆinline"><a href="#å†…è”å‡½æ•°ï¼ˆinline" class="headerlink" title="å†…è”å‡½æ•°ï¼ˆinline)"></a>å†…è”å‡½æ•°ï¼ˆinline)</h5><p>inlineå‡½æ•°ä¼šå°†ä»£ç å¤åˆ¶åˆ°è°ƒç”¨å¤„ã€‚æ¨èä½¿ç”¨ä¼ å…¥å¯¹è±¡æ˜¯å‡½æ•°è°ƒç”¨çš„æƒ…å†µï¼Œå‡å°‘ç¼–è¯‘è¿‡ç¨‹ä¸­äº§ç”Ÿçš„å¯¹è±¡ã€‚</p>
]]></content>
      <tags>
        <tag>Kotlin</tag>
      </tags>
  </entry>
</search>
